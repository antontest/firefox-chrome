var Cc=Components.classes,Ci=Components.interfaces,nsILastPassExternal=Ci.nsILastPassExternal,nsISupports=Ci.nsISupports,CLASS_ID_EXTERNAL=Components.ID("{27befaa9-ce4f-406c-9f3d-b794519d5a03}"),CLASS_NAME_EXTERNAL="LastPass External Javascript XPCOM Component",CONTRACT_ID_EXTERNAL="@lastpass.com/external/lastpass;1",LPExternal=null,LastPassExternalFactory={createInstance:function(a,b){if(null!=a)throw Components.results.NS_ERROR_NO_AGGREGATION;null==LPExternal&&(LPExternal=new LastPassExternalContainer,
Cc["@mozilla.org/consoleservice;1"].getService(Ci.nsIConsoleService).logStringMessage("created LPExternal"));return LPExternal.QueryInterface(b)}},LastPassExternalModule={registerSelf:function(a,b,c,d){a=a.QueryInterface(Ci.nsIComponentRegistrar);a.registerFactoryLocation(CLASS_ID_EXTERNAL,CLASS_NAME_EXTERNAL,CONTRACT_ID_EXTERNAL,b,c,d);Cc["@mozilla.org/consoleservice;1"].getService(Ci.nsIConsoleService).logStringMessage("LastPassExternalModule registered")},unregisterSelf:function(a,b){a=a.QueryInterface(Ci.nsIComponentRegistrar);
a.unregisterFactoryLocation(CLASS_ID_EXTERNAL,b)},getClassObject:function(a,b,c){if(!c.equals(Ci.nsIFactory))throw Components.results.NS_ERROR_NOT_IMPLEMENTED;if(b.equals(CLASS_ID_EXTERNAL))return LastPassExternalFactory;throw Components.results.NS_ERROR_NO_INTERFACE;},canUnload:function(){return!0}};function NSGetModule(){return LastPassExternalModule}function NSGetFactory(){return LastPassExternalFactory}
function LastPassExternalContainer(){this.QueryInterface=function(a){try{if(XPCOMUtils.generateNSGetFactory)return XPCOMUtils.generateQI([nsILastPassExternal]);consoleService.logStringMessage("LastPassExternal: typeof: "+typeof nsILastPassExternal);if(!a.equals(nsILastPassExternal)&&!a.equals(nsISupports))throw Components.results.NS_ERROR_NO_INTERFACE;}catch(b){}return this};this.logoff=function(){var a=Cc["@mozilla.org/consoleservice;1"].getService(Ci.nsIConsoleService);try{var b=Cc["@lastpass.com/lastpass;1"].getService().wrappedJSObject;
b&&"function"==typeof b.logoff?(b.logoff(),a.logStringMessage("Called LP.logoff()")):a.logStringMessage("logoff NO LP object or logoff not a function")}catch(c){a.logStringMessage("LastPass: err:"+c+" ln:"+c.lineNumber)}};this.loginCheck=function(){try{var a=Cc["@mozilla.org/consoleservice;1"].getService(Ci.nsIConsoleService);Cc["@lastpass.com/lastpass;1"].getService()}catch(b){a.logStringMessage("LastPass: err:"+b+" ln:"+b.lineNumber)}};this.refresh=function(){Cc["@mozilla.org/consoleservice;1"].getService(Ci.nsIConsoleService).logStringMessage("LastPass: refresh called")};
this.click=function(){var a=Cc["@lastpass.com/lastpass;1"].getService().wrappedJSObject;a.alert("LOGGED IN: "+a.getLoggedIn())}};
